!function(e){e.module("slpaVideoPlayer.config",[]).value("slpaVideoPlayer.config",{debug:!0}),e.module("slpaVideoPlayer.services",[]),e.module("slpaVideoPlayer",["ngMaterial","slpaVideoPlayer.config","slpaVideoPlayer.directives","slpaVideoPlayer.filters","slpaVideoPlayer.services"])}(angular),angular.module("slpaVideoPlayer.directives",[]).directive("clip",function(){return{scope:{videosource:"="},restrict:"AE",replace:!0,template:' <md-card><div layout="row"><div flex ="66"><md-card><div class=" card-media"><video id="player" src="{{videosource}}" pause-video loaded-data muted autoplay autobuffer controls></video></div><md-card-content ng-show="true"><div layout-gt-sm="row"><md-input-container class="md-block" flex-gt-sm><label>Clip name</label><input  ng-model="clip.name"></md-input-container><md-input-container class="md-block" flex-gt-sm><label>Start time</label><input type="number" ng-model="clip.startTime"></md-input-container></div><div layout-gt-sm="row"><md-input-container class="md-block" flex-gt-sm></md-input-container><md-input-container class="md-block" flex-gt-sm><label>End Time</label><input type="number" ng-model="clip.endTime"></md-input-container></div></md-card-content><md-card-actions layout="row" layout-align="end center"><md-button class="md-raised md-accient" ng-click="saveClip()">Guardar</md-button><md-button class="md-raised md-primary" ng-click="resetClip()">Nuevo</md-button></md-card-actions></md-card></div><div flex="33"><md-content flex  layout-padding><md-list><md-list-item class="md-3-line secondary-button-padding" ng-repeat="item in clips track by item.name"ng-click="setSource(item,$index)"><img src="images/poster.jpg" class="md-avatar"/><div class="md-list-item-text" layout="column"><h3>{{ item.name }}</h3><p>Start ({{ item.startTime|secondsToHHmmss }}) -  End ({{item.endTime|secondsToHHmmss}})</p><md-button class="md-secondary md-accent md-raised" ng-show="$index!=0" ng-click="deleteClip($index)">Delete</md-button></div></md-list-item><md-divider ></md-divider></md-list></md-content></div></div></md-card>',controller:function(e){e.videosourceOrigin=e.videosource,e.resetClip=function(){e.clip={name:null,startTime:null,endTime:null,source:null,playFragment:null},e.new=!0},e.new=!0,e.clip={name:null,startTime:null,endTime:null,source:null,playFragment:null},e.clips=[],angular.element("#player").bind("loadeddata",function(){e.videoDuration=angular.element("#player")[0].duration,e.clips[0].endTime=e.videoDuration}),angular.element("#player").on("pause",function(){e.a=0}),e.clips.push({name:"Full Video",startTime:0,endTime:e.videoDuration,source:e.videosourceOrigin,playFragment:e.videosourceOrigin}),e.saveClip=function(){e.clip.source=e.videosource,e.clip.playFragment=e.videosourceOrigin+"#t="+e.clip.startTime+","+e.clip.endTime,e.new===!0&&e.clips.push(e.clip)},e.deleteClip=function(i){e.clips.splice(i,1),e.resetClip()},e.setSource=function(i,l){e.videosource=i.playFragment,0!==l?(e.clip=i,e.new=!1):e.resetClip()}},link:function(e){e.$watch("color",function(){console.log("changed detected")})}}}),angular.module("slpaVideoPlayer.filters",[]).filter("secondsToHHmmss",function(e){return function(i){return e("date")(new Date(0,0,0).setSeconds(i),"HH:mm:ss")}});